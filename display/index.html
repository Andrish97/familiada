<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Scenografia – spójna geometria + dół</title>
  <style>
    html, body { height:100%; margin:0; }
    body{
      display:grid;
      place-items:center;
      overflow:hidden;
      background: radial-gradient(
        1400px 700px at 50% 25%,
        #ff5aa0 0%,
        #ff3b63 22%,
        #c43e79 45%,
        #6a4aa7 72%,
        #1b1a2b 100%
      );
    }
    .wrap{
      width:99vw;
      height:92vh;
      display:grid;
      place-items:center;
    }
    svg{ width:100%; height:100%; display:block; }
  </style>
</head>
<body>
<div class="wrap">
<svg viewBox="0 0 1600 900" xmlns="http://www.w3.org/2000/svg">

  <!-- OWAŁ – „poprzednia wersja” -->
  <defs>
    <linearGradient id="rimGrad" x1="0" y1="0" x2="1" y2="0">
      <stop offset="0" stop-color="#000000"/>
      <stop offset="0.35" stop-color="#2f2b3c"/>
      <stop offset="0.65" stop-color="#2a62ff"/>
      <stop offset="1" stop-color="#2a62ff"/>
    </linearGradient>

    <linearGradient id="innerGrad" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0" stop-color="#e6eaef"/>
      <stop offset="1" stop-color="#bfc7cf"/>
    </linearGradient>
  </defs>

  <rect x="50" y="135" width="1500" height="630" rx="315" fill="url(#rimGrad)"/>
  <rect x="210" y="225" width="1180" height="450" rx="225" fill="url(#innerGrad)"/>

  <g stroke="#ffffff" stroke-opacity="0.22" stroke-width="6">
    <line x1="800" y1="135" x2="800" y2="225"/>
    <line x1="170" y1="185" x2="360" y2="340"/>
    <line x1="1430" y1="185" x2="1240" y2="340"/>
    <line x1="170" y1="715" x2="360" y2="560"/>
    <line x1="1430" y1="715" x2="1240" y2="560"/>
  </g>

  <!-- NOWE: dół na tle -->
  <g id="bottom"></g>

  <g id="panels"></g>
  <g id="center"></g>

</svg>
</div>

<script>
(() => {
  const NS="http://www.w3.org/2000/svg";
  const mk=(n,a={})=>{const e=document.createElementNS(NS,n);for(const [k,v] of Object.entries(a))e.setAttribute(k,v);return e;};

  // ===== KOLORY (jak ustaliliśmy) =====
  const COLOR_BIG  = "#2e2e32"; // duże prostokąty: ciemny szary
  const COLOR_CELL = "#000000"; // małe prostokąty: czarne
  const COLOR_DOT  = "#2e2e32"; // kółka: ciemny szary

  // ===== PARAMETRY JEDNOSTEK =====
  const d = 4;   // średnica kółka w środku
  const g = 1;   // odstęp
  const r = d/2;

  // siatka w małym prostokącie
  const DOTS_X = 5, DOTS_Y = 7;

  // wymiary małego prostokąta (Twoje wzory)
  const W_small = 5*d + 6*g;
  const H_small = 7*d + 8*g;

  // odstęp między małymi prostokątami w dużej siatce = średnica
  const gapCells = d;

  // =========================
  // ŚRODEK: 30 x 10 małych
  // =========================
  const CELLS_X = 30, CELLS_Y = 10;

  const W_big = 30*W_small + 29*gapCells + 2*g;
  const H_big = 10*H_small + 9*gapCells  + 2*g;

  const centerX = 800, centerY = 450;
  const bigX = centerX - W_big/2;
  const bigY = centerY - H_big/2;

  const centerG = document.getElementById("center");

  // duże tło środkowe
  centerG.appendChild(mk("rect", {
    x: bigX, y: bigY, width: W_big, height: H_big,
    rx: 0, fill: COLOR_BIG
  }));

  // małe prostokąty + kółka
  for (let cy=0; cy<CELLS_Y; cy++){
    for (let cx=0; cx<CELLS_X; cx++){
      const cellX = bigX + g + cx*(W_small + gapCells);
      const cellY = bigY + g + cy*(H_small + gapCells);

      centerG.appendChild(mk("rect",{
        x: cellX, y: cellY, width: W_small, height: H_small,
        rx: 0, fill: COLOR_CELL
      }));

      const step = d + g;
      for (let j=0; j<DOTS_Y; j++){
        for (let i=0; i<DOTS_X; i++){
          centerG.appendChild(mk("circle",{
            cx: cellX + g + r + i*step,
            cy: cellY + g + r + j*step,
            r: r,
            fill: COLOR_DOT
          }));
        }
      }
    }
  }

  // =========================
  // PANELE BOCZNE (3 identyczne)
  // =========================
  const panelsG = document.getElementById("panels");

  const dP = 3*d;          // 3x szerokość
  const rP = dP/2;

  const W_small_P = 5*dP + 6*g;
  const H_small_P = 7*dP + 8*g;

  const W_side = 3*W_small_P + 2*gapCells + 2*g;
  const H_side = 1*H_small_P + 2*g;

  function drawSidePanel(x, y){
    const grp = mk("g");
    panelsG.appendChild(grp);

    grp.appendChild(mk("rect",{
      x, y, width: W_side, height: H_side,
      rx: 0, fill: COLOR_BIG
    }));

    for (let k=0; k<3; k++){
      const cellX = x + g + k*(W_small_P + gapCells);
      const cellY = y + g;

      grp.appendChild(mk("rect",{
        x: cellX, y: cellY, width: W_small_P, height: H_small_P,
        rx: 0, fill: COLOR_CELL
      }));

      const stepP = dP + g;
      for (let j=0; j<DOTS_Y; j++){
        for (let i=0; i<DOTS_X; i++){
          grp.appendChild(mk("circle",{
            cx: cellX + g + rP + i*stepP,
            cy: cellY + g + rP + j*stepP,
            r: rP,
            fill: COLOR_DOT
          }));
        }
      }
    }
  }

  drawSidePanel(10, 390);
  drawSidePanel(1600 - W_side - 10, 390);
  drawSidePanel(800 - W_side/2, 85);

  // =========================
  // NOWE: DWA PROSTOKĄTY NA DOLE (95 x 7 kółek)
  // =========================
  const bottomG = document.getElementById("bottom");

  const BX = 95, BY = 7;

  // mały (wewnętrzny) wg Twojego wzoru:
  const Wb_small = BX*d + (BX+1)*g;   // 95d + 96g
  const Hb_small = BY*d + (BY+1)*g;   // 7d + 8g

  // większy (zewnętrzny):
  const Wb_outer = Wb_small + 2*g;
  const Hb_outer = Hb_small + 2*g;

  const gapBetween = 24; // odstęp między dwoma prostokątami (możesz zmienić)
  const totalW = Wb_outer*2 + gapBetween;

  // pozycja: mały odstęp od owalu (owal kończy się na y = 135+630 = 765)
  const ovalBottomY = 135 + 630;
  const gapFromOval = 12;

  const yOuter = ovalBottomY + gapFromOval;
  const xLeftOuter = 800 - totalW/2;
  const xRightOuter = xLeftOuter + Wb_outer + gapBetween;

  function drawBottomBlock(xOuter, yOuter){
    // zewnętrzny (ciemny szary)
    bottomG.appendChild(mk("rect",{
      x: xOuter, y: yOuter,
      width: Wb_outer, height: Hb_outer,
      rx: 0, fill: COLOR_BIG
    }));

    // wewnętrzny (czarny) odsunięty o g
    const xInner = xOuter + g;
    const yInner = yOuter + g;

    bottomG.appendChild(mk("rect",{
      x: xInner, y: yInner,
      width: Wb_small, height: Hb_small,
      rx: 0, fill: COLOR_CELL
    }));

    // kółka 95 x 7
    const step = d + g;
    for(let j=0;j<BY;j++){
      for(let i=0;i<BX;i++){
        bottomG.appendChild(mk("circle",{
          cx: xInner + g + r + i*step,
          cy: yInner + g + r + j*step,
          r: r,
          fill: COLOR_DOT
        }));
      }
    }
  }

  drawBottomBlock(xLeftOuter, yOuter);
  drawBottomBlock(xRightOuter, yOuter);

})();
</script>
</body>
</html>
