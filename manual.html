<!-- manual.html -->
<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Familiada — instrukcja</title>

  <link rel="icon" href="favicon.ico" />
  <link rel="stylesheet" href="css/base.css" />
  <link rel="stylesheet" href="css/manual.css" />

  <!-- supabase-js v2 (często wymagane przez js/core/supabase.js używany w auth) -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2" defer></script>

  <script type="module" src="js/pages/manual.js" defer></script>
</head>

<body class="manual-body">
  <!-- Auth bar -->
  <header class="topbar">
    <div class="brand">FAMILIADA</div>
    <div class="right">
      <button class="btn" id="btnBack" type="button">← Moje gry</button>
      <span class="who" id="who">—</span>
      <button class="btn" id="btnLogout" type="button">Wyloguj</button>
    </div>
  </header>

<main class="wrap">
  <h1 class="page-title">Instrukcja użytkowania</h1>

  <!-- Proste karty / zakładki -->
  <nav class="simple-tabs" aria-label="Zakładki instrukcji">
    <button class="tab active" type="button" data-tab="general">Ogólny opis</button>
    <button class="tab" type="button" data-tab="edit">Dodawanie i edycja gry</button>
    <button class="tab" type="button" data-tab="polls">Sondaże</button>
    <button class="tab" type="button" data-tab="control">Panel sterowania</button>
  </nav>

  <!-- OGÓLNY OPIS -->
  <section class="tab-page active" id="tab-general" aria-label="Ogólny opis">
    <div class="m-doc">

      <p class="m-p">
        Ta strona jest instrukcją obsługi systemu do prowadzenia teleturnieju
        typu „Familiada”. Jej celem jest wyjaśnienie, jak korzystać z całego systemu,
        nawet jeśli ktoś widzi go pierwszy raz i nie zna go od strony technicznej.
      </p>

      <p class="m-p">
        Instrukcja nie opisuje zasad gry jako teleturnieju.
        Opisuje natomiast narzędzie, które pozwala taką grę przygotować
        i bezpiecznie przeprowadzić na żywo,
        z wyraźnym podziałem ról i obowiązków.
      </p>

      <p class="m-p">
        System umożliwia pełne przygotowanie i prowadzenie rozgrywki:
        od tworzenia gier i pytań, przez sondaże i przypisywanie punktów,
        aż po sterowanie rundami, bankiem punktów oraz finałem.
        Wszystkie te elementy są zintegrowane w jednym spójnym środowisku.
      </p>

      <p class="m-p">
        Rozgrywka została zaprojektowana w taki sposób,
        aby była w bardzo dużym stopniu zgodna z oficjalnym regulaminem
        teleturnieju „Familiada”.
        Mechanika rund, bank punktów, liczba błędów (X),
        przejmowanie pytania oraz zasady finału
        odpowiadają klasycznej formule programu.
      </p>

      <p class="m-p">
        Jeśli chcesz zapoznać się z pełnymi zasadami gry,
        <a href="https://s.tvp.pl/repository/attachment/6/8/f/68f09c03ff0781fa510c2fd90c3ba19b1569224834470.pdf"
           target="_blank"
           rel="noopener">
          Regulamin teleturnieju „Familiada”
        </a>
        opisuje je szczegółowo.
      </p>

      <p class="m-p">
        Całość systemu została zaprojektowana tak,
        aby wyraźnie oddzielić przygotowanie treści
        od samej rozgrywki.
        Pytania, odpowiedzi i sondaże przygotowuje się wcześniej,
        natomiast w trakcie gry operator korzysta wyłącznie
        z panelu sterowania.
      </p>

      <p class="m-p">
        W praktyce oznacza to, że w dniu nagrania
        operator nie musi edytować danych,
        prowadzący skupia się na rozmowie z uczestnikami,
        a system pilnuje kolejności etapów i logiki rozgrywki.
        Zmniejsza to ryzyko pomyłek i przyspiesza przebieg gry.
      </p>

      <p class="m-p">
        System najlepiej działa przy użyciu osobnych urządzeń:
        wyświetlacza dla widzów (telewizor lub rzutnik),
        tabletu lub telefonu dla prowadzącego,
        osobnego urządzenia pełniącego rolę przycisku
        oraz komputera operatora z panelem sterowania.
      </p>

      <p class="m-p">
        Instrukcja została podzielona na kolejne zakładki.
        Każda z nich opisuje inny etap pracy z systemem:
        od przygotowania gry,
        przez sondaże,
        aż po prowadzenie rozgrywki na żywo.
      </p>

    </div>
  </section>

  <!-- POZOSTAŁE KARTY – NA RAZIE PUSTE -->
  <section class="tab-page" id="tab-edit" aria-label="Dodawanie i edycja gry">
    <div class="m-doc">

      <p class="m-p">
        Zakładka „Dodawanie i edycja gry” opisuje etap przygotowania gry
        przed rozpoczęciem sondażu lub rozgrywki.
        Na tym etapie tworzysz strukturę gry:
        pytania, możliwe odpowiedzi oraz sposób ich punktowania.
      </p>
    
      <p class="m-p">
        Ten etap jest kluczowy, ponieważ decyduje o tym,
        jak będzie wyglądać cała dalsza praca z grą.
        System celowo rozdziela przygotowanie treści
        od późniejszego zbierania odpowiedzi i prowadzenia rozgrywki.
      </p>
    
      <h3 class="m-h2">Lista gier („Moje gry”)</h3>
    
      <p class="m-p">
        Lista gier jest miejscem, w którym zarządzasz wszystkimi grami
        przypisanymi do Twojego konta.
        To tutaj możesz tworzyć nowe gry,
        wybierać istniejące
        oraz decydować, co chcesz z daną grą zrobić dalej.
      </p>
    
      <p class="m-p">
        Gry są podzielone na typy.
        Typ gry określa, w jaki sposób odpowiedzi będą zbierane
        i jak powstaną punkty widoczne później na tablicy.
      </p>
    
      <ul class="m-ul">
        <li>
          <span class="m-strong">Typowy sondaż</span> —
          odpowiedzi są wpisywane przez ankietowanych,
          a punkty wynikają z liczby wskazań.
        </li>
        <li>
          <span class="m-strong">Punktacja odpowiedzi</span> —
          ankietowani wybierają spośród przygotowanych odpowiedzi,
          a system zlicza głosy.
        </li>
        <li>
          <span class="m-strong">Preparowany</span> —
          odpowiedzi i punkty są ustalane ręcznie,
          bez udziału sondażu.
        </li>
      </ul>
    
      <p class="m-p">
        Nową grę tworzysz klikając kafelek z symbolem „＋”.
        Po utworzeniu gra pojawia się na liście
        i może zostać otwarta w edytorze.
      </p>
    
      <h3 class="m-h2">Edytor gry – co i kiedy można edytować</h3>
    
      <p class="m-p">
        Edytor gry służy do budowania struktury pytań i odpowiedzi.
        W zależności od typu gry oraz jej stanu
        dostępne opcje edycji mogą się różnić.
      </p>
    
      <p class="m-p">
        Jest to działanie celowe.
        System ogranicza pewne operacje,
        aby zachować spójność danych
        i zapobiec sytuacjom,
        w których rozgrywka lub sondaż
        przestają odpowiadać przygotowanej treści.
      </p>
    
      <h3 class="m-h3">Dodawanie i edycja pytań</h3>
    
      <p class="m-p">
        Pytania są zawsze podstawowym elementem gry.
        Na etapie przygotowania możesz:
        dodawać nowe pytania,
        zmieniać ich treść
        oraz usuwać pytania niepotrzebne.
      </p>
    
      <p class="m-p">
        Zmiana pytania po uruchomieniu sondażu
        może zostać zablokowana,
        ponieważ nawet drobna modyfikacja treści
        wpływa na sens zebranych odpowiedzi.
      </p>
    
      <h3 class="m-h3">Dodawanie i edycja odpowiedzi</h3>
    
      <p class="m-p">
        Możliwość edycji odpowiedzi zależy od typu gry.
        W grach sondażowych odpowiedzi są efektem ankiety,
        dlatego przed sondażem możesz jedynie przygotować
        ich ogólną strukturę lub przykłady.
      </p>
    
      <p class="m-p">
        Po rozpoczęciu sondażu system może ograniczyć
        dodawanie lub usuwanie odpowiedzi,
        aby nie mieszać odpowiedzi ankietowanych
        z nową treścią.
      </p>
    
      <h3 class="m-h3">Punkty – dlaczego czasem są zablokowane</h3>
    
      <p class="m-p">
        Punkty nie zawsze są edytowalne ręcznie.
        W grach sondażowych punkty wynikają bezpośrednio
        z liczby udzielonych odpowiedzi,
        dlatego ich ręczna edycja nie ma sensu
        i jest zablokowana.
      </p>
    
      <p class="m-p">
        Ręczne ustawianie punktów jest możliwe
        tylko w trybie preparowanym,
        gdzie system nie korzysta z danych ankietowych.
      </p>
    
      <div class="m-note">
        <b>Dlaczego tak jest?</b><br/>
        Dzięki temu to, co widzi widz na tablicy,
        zawsze odpowiada rzeczywistym wynikom sondażu
        albo jasno określonej, ręcznej punktacji.
      </div>
    
      <h3 class="m-h2">Ograniczenia długości i formatu</h3>
    
      <p class="m-p">
        Odpowiedzi powinny być krótkie i czytelne.
        Przy imporcie treści odpowiedzi dłuższe
        niż <span class="m-strong">17 znaków</span>
        są automatycznie przycinane.
      </p>
    
      <p class="m-p">
        To ograniczenie wynika z układu tablicy
        i ma na celu zachowanie czytelności
        podczas rozgrywki na żywo.
      </p>
    
      <h3 class="m-h2">Import i eksport gier</h3>
    
      <p class="m-p">
        Builder umożliwia eksport i import gier
        w postaci plików.
        Funkcja ta służy do przenoszenia gier
        pomiędzy kontami lub środowiskami.
      </p>
    
      <p class="m-p">
        Pliki importu i eksportu są formatem technicznym.
        Gra nie powinna ingerować w ich zawartość
        ani próbować edytować ich ręcznie.
      </p>
    
      <div class="m-warn">
        <b>Uwaga:</b>
        ręczna modyfikacja plików importu lub eksportu
        może spowodować, że gry nie będzie się dało zaimportować
        albo będzie działała nieprawidłowo.
      </div>
    
      <p class="m-p">
        Po poprawnym imporcie gra pojawia się
        na liście gier i może być dalej edytowana
        wyłącznie przy użyciu edytora systemowego.
      </p>
    

    </div>
  </section>

  <section class="tab-page" id="tab-polls" aria-label="Sondaże">
    <div class="m-doc">

  <p class="m-p">
    Zakładka „Sondaże” opisuje etap zbierania odpowiedzi
    od ankietowanych przed właściwą rozgrywką.
    Sondaż jest mostem pomiędzy przygotowaniem gry
    a jej rozegraniem na żywo.
  </p>

  <p class="m-p">
    Na tym etapie system przestaje być edytorem treści,
    a zaczyna działać jak narzędzie do zbierania danych.
    Z tego powodu wiele opcji edycji jest celowo ograniczonych.
  </p>

  <h3 class="m-h2">Rodzaje sondaży</h3>

  <p class="m-p">
    W zależności od typu gry sondaż może działać w jednym z dwóch trybów:
  </p>

  <ul class="m-ul">
    <li>
      <span class="m-strong">Typowy sondaż (tekstowy)</span> —
      ankietowani wpisują własne odpowiedzi tekstowe.
    </li>
    <li>
      <span class="m-strong">Sondaż punktacji</span> —
      ankietowani wybierają jedną z przygotowanych odpowiedzi.
    </li>
  </ul>

  <p class="m-p">
    Gry preparowane nie posiadają sondażu —
    odpowiedzi i punkty są w nich ustalane ręcznie.
  </p>

  <h3 class="m-h2">Uruchamianie sondażu</h3>

  <p class="m-p">
    Sondaż można uruchomić wyłącznie dla gry
    znajdującej się w stanie <span class="m-strong">Szkic</span>.
    Przed uruchomieniem system sprawdza,
    czy gra spełnia minimalne wymagania.
  </p>

  <ul class="m-ul">
    <li>minimalna liczba pytań,</li>
    <li>w trybie punktacji — odpowiednia liczba odpowiedzi przy każdym pytaniu.</li>
  </ul>

  <div class="m-note">
    <b>Dlaczego?</b><br/>
    Dzięki temu nie da się uruchomić sondażu,
    który nie może zostać później poprawnie zamknięty
    i użyty w rozgrywce.
  </div>

  <h3 class="m-h2">Link i kod QR</h3>

  <p class="m-p">
    Po uruchomieniu sondażu system generuje
    unikalny link do głosowania.
    Link ten można skopiować,
    otworzyć w nowej karcie
    lub wyświetlić jako kod QR.
  </p>

  <p class="m-p">
    Kod QR jest przeznaczony do wyświetlania
    na ekranie widocznym dla ankietowanych
    (telewizor, rzutnik, duży monitor).
  </p>

  <h3 class="m-h2">Przebieg sondażu</h3>

  <p class="m-p">
    Ankietowani przechodzą przez pytania po kolei.
    System pilnuje kolejności
    i nie pozwala pominąć pytania.
  </p>

  <p class="m-p">
    W sondażu tekstowym każda odpowiedź:
  </p>

  <ul class="m-ul">
    <li>jest ograniczona do 17 znaków,</li>
    <li>jest normalizowana (wielkość liter, spacje),</li>
    <li>zliczana jest jako osobna propozycja.</li>
  </ul>

  <p class="m-p">
    W sondażu punktacji ankietowany
    wybiera jedną z przygotowanych odpowiedzi,
    a system zapisuje oddany głos.
  </p>

  <h3 class="m-h2">Zamykanie sondażu</h3>

  <p class="m-p">
    Zamknięcie sondażu jest osobnym,
    świadomym etapem pracy.
    System nie pozwala zamknąć sondażu,
    jeśli zebrane dane nie spełniają
    minimalnych warunków jakości.
  </p>

  <h3 class="m-h3">Sondaż punktacji</h3>

  <p class="m-p">
    Przy zamykaniu sondażu punktacji
    system przelicza głosy na punkty
    i normalizuje je do skali 0–100
    dla każdego pytania.
  </p>

  <div class="m-note">
    <b>Efekt:</b>
    otrzymujesz gotową listę odpowiedzi z punktami,
    bez potrzeby ręcznego liczenia.
  </div>

  <h3 class="m-h3">Sondaż tekstowy</h3>

  <p class="m-p">
    W sondażu tekstowym (klasycznym) ankietowani wpisują własne odpowiedzi.
    Po zamknięciu sondażu system przechodzi do etapu porządkowania wyników.
    Operator może łączyć oczywiście podobne odpowiedzi
    oraz usuwać literówki lub oczywiste duplikaty.
  </p>
  
  <p class="m-p">
    Następnie odpowiedzi są normalizowane do skali punktowej.
    Na tym etapie system stosuje dodatkowe ograniczenia,
    które mają na celu zachowanie czytelności tablicy
    i dynamiki rozgrywki.
  </p>
  
  <p class="m-p">
    Odpowiedzi o bardzo małej liczbie wskazań,
    które po normalizacji uzyskują
    <span class="m-strong">mniej niż 8 punktów</span>,
    są automatycznie odrzucane.
    Takie odpowiedzi zwykle nie mają znaczenia dla gry
    i nie byłyby czytelne dla widzów.
  </p>
  
  <p class="m-p">
    Dla jednego pytania na tablicy
    może znaleźć się maksymalnie
    <span class="m-strong">6 odpowiedzi</span>.
    Jeżeli poprawnych odpowiedzi jest więcej,
    system wybiera te najlepiej punktowane,
    a pozostałe są pomijane.
  </p>
  
  <p class="m-p">
    Z tego powodu suma punktów dla jednego pytania
    <span class="m-strong">nie zawsze wynosi dokładnie 100</span>.
    Punkty przypisane są wyłącznie do odpowiedzi,
    które faktycznie trafiają na tablicę.
  </p>

  <div class="m-warn">
    <b>Uwaga:</b>
    po zamknięciu sondażu
    nie można już zmieniać jego wyników
    bez ponownego uruchomienia sondażu.
  </div>

  <h3 class="m-h2">Ponowne uruchomienie sondażu</h3>

  <p class="m-p">
    Zamknięty sondaż można uruchomić ponownie,
    co powoduje usunięcie poprzednich wyników
    i rozpoczęcie zbierania odpowiedzi od nowa.
  </p>

  <p class="m-p">
    Ta opcja jest przydatna,
    gdy sondaż został uruchomiony testowo
    lub doszło do błędu organizacyjnego.
  </p>

</div>
  </section>

  <section class="tab-page" id="tab-control" aria-label="Panel sterowania">
    <div class="m-doc"></div>
  </section>
</main>

</body>
</html>
