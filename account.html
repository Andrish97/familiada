<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8"/>
  <meta name="robots" content="noindex, nofollow"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title data-i18n="account.pageTitle">Familiada — ustawienia konta</title>

  <link rel="icon" href="favicon.ico" />
  <link rel="stylesheet" href="css/base.css"/>
  <link rel="stylesheet" href="css/builder.css"/>
  <link rel="stylesheet" href="css/account.css"/>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2" defer></script>
  <script type="module" src="js/pages/account.js" defer></script>
</head>

<body class="account-body">
  <header class="topbar">
    <div class="brand">FAMILIADA</div>
    <button class="btn" id="backToGames" type="button" data-base-href="builder.html" data-i18n="account.backToGames">← Moje gry</button>
    <div class="right">
      <div class="spacer"></div>
    </div>
  </header>

  <main class="wrap account-wrap">
    <div class="bar">
      <div>
        <div class="title" data-i18n="account.headerTitle">Ustawienia konta</div>
        <div class="hint" data-i18n="account.headerHint">Zarządzaj profilem, e-mailem i bezpieczeństwem.</div>
      </div>
    </div>

    <div class="account-status">
      <div class="status" id="status" data-i18n="account.statusLoading">Ładuję profil…</div>
      <div class="err" id="err"></div>
    </div>

    <div class="account-grid">
      <section class="account-panel">
        <div class="section-title" data-i18n="account.usernameTitle">Nazwa użytkownika</div>
        <div class="section-hint" data-i18n="account.usernameHint">Widoczna dla subskrybentów i w panelu.</div>
        <input class="inp" id="username" placeholder="Nazwa użytkownika" autocomplete="username" data-i18n-placeholder="account.usernamePlaceholder"/>
        <div class="cooldown" id="usernameCooldown" hidden></div>
        <button class="btn gold full" id="saveUsername" type="button" data-i18n="account.usernameSave">Zapisz nazwę</button>
      </section>

      <section class="account-panel">
        <div class="section-title" data-i18n="account.emailTitle">E-mail</div>
        <div class="section-hint" data-i18n="account.emailHint">Zmieniaj adres logowania. Po zmianie sprawdź skrzynkę na obecnym i nowym e-mailu, aby potwierdzić operację.</div>
        <input class="inp" id="email" type="email" placeholder="Nowy e-mail" autocomplete="email" data-i18n-placeholder="account.emailPlaceholder"/>
        <div class="cooldown" id="emailCooldown" hidden></div>
        <div class="email-actions" id="emailActions">
          <button class="btn gold full" id="saveEmail" type="button" data-i18n="account.emailSave">Zmień e-mail</button>
          <div class="pending-actions pending-actions--stack" id="emailPendingActions" hidden>
            <button class="btn gold full" id="resendEmailChange" type="button" data-i18n="account.emailResend">Wyślij ponownie</button>
            <button class="btn full" id="cancelEmailChange" type="button" data-i18n="account.emailCancel">Anuluj zmianę</button>
          </div>
        </div>
<div class="section-hint" data-i18n="account.emailPostHint">Zmiana e-maila wymaga potwierdzenia linków w skrzynkach. Do tego czasu możesz logować się dotychczasowym adresem.</div>
        <div class="section-hint subtle" data-i18n="account.emailNoAccessHint"></div>
        <div class="section-hint" id="emailPendingHint" hidden></div>
      </section>

      <section class="account-panel">
        <div class="section-title" data-i18n="account.passwordTitle">Hasło</div>
        <div class="section-hint" data-i18n="account.passwordHint">Minimum 8 znaków, małe/duże litery, cyfra i znak specjalny.</div>
        <input class="inp" id="pass1" type="password" placeholder="Nowe hasło" autocomplete="new-password" data-i18n-placeholder="account.passwordPlaceholder"/>
        <input class="inp" id="pass2" type="password" placeholder="Powtórz nowe hasło" autocomplete="new-password" data-i18n-placeholder="account.passwordRepeatPlaceholder"/>
        <div class="cooldown" id="passwordCooldown" hidden></div>
        <button class="btn gold full" id="savePass" type="button" data-i18n="account.passwordSave">Zmień hasło</button>
      </section>

      <section class="account-panel danger">
        <div class="section-title" data-i18n="account.deleteTitle">Usuń konto</div>
        <div class="section-hint" data-i18n="account.deleteHint">Ta operacja jest nieodwracalna. Wpisz hasło, aby potwierdzić.</div>
        <input class="inp" id="deletePassword" type="password" placeholder="Hasło" autocomplete="current-password" data-i18n-placeholder="account.deletePlaceholder"/>
        <button class="btn danger full" id="deleteAccount" type="button" data-i18n="account.deleteButton">Usuń konto i dane</button>
      </section>
    </div>
  </main>
</body>
</html>
