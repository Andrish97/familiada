<!DOCTYPE html>
<html lang="pl">
  <head>
    <meta charset="UTF-8" />
    <title>Familiada – Rzutnik</title>

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="favicon.ico" />

    <link rel="stylesheet" href="css/theme.css" />
    <link rel="stylesheet" href="css/display.css" />

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js" defer></script>

    <script type="module" src="js/pages/display.js"></script>
  </head>

  <body class="arcade-body">
    <div class="disp-shell">
      <div class="disp-top">
        <div class="disp-team disp-a">
          <div class="disp-team-name">DRUŻYNA A</div>
          <div class="disp-team-score">0</div>
        </div>

        <div class="disp-mid">
          <div class="disp-game">FAMILIADA</div>
          <div class="disp-question">—</div>
          <div class="disp-sum">
            <span>SUMA</span>
            <span class="disp-sum-val">0</span>
          </div>
        </div>

        <div class="disp-team disp-b">
          <div class="disp-team-name">DRUŻYNA B</div>
          <div class="disp-team-score">0</div>
        </div>
      </div>

      <div class="disp-board">
        <div class="disp-strikes">
          <div class="disp-x disp-x1">X</div>
          <div class="disp-x disp-x2">X</div>
          <div class="disp-x disp-x3">X</div>
        </div>

        <div class="disp-answers">
          ${Array.from({length:8}).map((_,i)=>`<div class="disp-row" data-i="${i+1}">
            <div class="disp-nr">${i+1}</div><div class="disp-text">••••••••••••</div><div class="disp-pts">—</div>
          </div>`).join("")}
        </div>
      </div>

      <div class="disp-setup" style="display:none;">
        <div class="disp-setup-card">
          <div class="disp-setup-title">Ustawienia wstępne</div>
          <div class="disp-setup-grid">
            <div class="disp-setup-box">
              <div class="disp-setup-label">HOST</div>
              <div class="disp-setup-qr" id="qr-setup-host"></div>
              <div class="disp-setup-link disp-setup-host-link">—</div>
            </div>
            <div class="disp-setup-box">
              <div class="disp-setup-label">BUZZER</div>
              <div class="disp-setup-qr" id="qr-setup-buzzer"></div>
              <div class="disp-setup-link disp-setup-buzzer-link">—</div>
            </div>
          </div>
          <div class="disp-setup-foot">Zeskanuj QR lub wpisz link. Potem wróć do gry.</div>
        </div>
      </div>
    </div>

    <script>
      // ten mały trik jest tylko po to, żeby nie pisać 8 wierszy ręcznie w HTML
      // (nie dotyka Supabase). Jeśli nie chcesz, to usuń i wklej ręcznie 8 divów.
      const wrap = document.querySelector(".disp-answers");
      if (wrap && wrap.textContent.includes("${Array.from")) {
        wrap.innerHTML = "";
        for (let i = 1; i <= 8; i++) {
          const row = document.createElement("div");
          row.className = "disp-row";
          row.setAttribute("data-i", String(i));
          row.innerHTML = `
            <div class="disp-nr">${i}</div>
            <div class="disp-text">••••••••••••</div>
            <div class="disp-pts">—</div>
          `;
          wrap.appendChild(row);
        }
      }
    </script>
  </body>
</html>
