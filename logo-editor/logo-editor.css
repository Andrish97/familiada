
:root{
  --lamp-active: #ffeb3b;
  --lamp-glow: rgba(255,235,59,.7);
}

/* ========= BASICS ========= */
.logo-editor-body{
  /* builder-body daje większość stylistyki */
}

.logoWrap{
  /* w builderze wrap jest OK; tu dopinamy tylko editor sizing */
}

/* ========= LIST / GRID ========= */
.logoShell{
  margin-top: 12px;
}

.logoCard{
  /* jedna karta, bez tabs-card */
}

.logoGridBig{
  display: grid;
  gap: 14px;
  grid-template-columns: repeat(auto-fill, minmax(270px, 1fr));
  align-items: stretch;
}

.logoTile{
  position: relative;
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(0,0,0,.14);
  padding: 12px;
  cursor: pointer;
  display: grid;
  gap: 10px;
  min-height: 230px;
  transition: transform .08s ease, border-color .12s ease, background .12s ease;
}

.logoTile:hover{
  transform: translateY(-1px);
  border-color: rgba(255,255,255,.22);
  background: rgba(0,0,0,.18);
}

.logoTile.is-selected{
  border-color: rgba(255,255,255,.40);
  box-shadow: 0 0 0 2px rgba(255,255,255,.12) inset;
}

.logoTileTop{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:10px;
  min-height: 40px;
}

.logoName{
  font-weight: 900;
  letter-spacing: .04em;
  font-size: 14px;
  line-height: 1.15;
  max-width: 100%;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.logoMeta{
  opacity: .75;
  font-size: 12px;
}

.logoX{
  width: 30px;
  height: 30px;
  display:flex;
  align-items:center;
  justify-content:center;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.16);
  cursor:pointer;
  user-select:none;
}

.logoX:hover{
  border-color: rgba(255,255,255,.22);
  background: rgba(0,0,0,.22);
}

.logoX.is-disabled{
  opacity:.35;
  pointer-events:none;
}

.logoPrev{
  flex:1;
  display:flex;
  align-items:center;
  justify-content:center;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.10);
  padding: 8px;
  overflow:hidden;
}

.logoPrev canvas{
  width: 100%;
  height: auto;
  max-height: 135px;
  image-rendering: pixelated;
}

/* aktywna lampka */
.logoLamp{
  position:absolute;
  left: 12px;
  bottom: 12px;
  width: 10px;
  height: 10px;
  border-radius: 999px;
  background: var(--lamp-active);
  box-shadow: 0 0 14px var(--lamp-glow);
  opacity: 0;
  transform: scale(.85);
  transition: opacity .12s ease, transform .12s ease;
}

.logoTile.is-active .logoLamp{
  opacity: 1;
  transform: scale(1);
}

/* plus tile (jak builder) */
.logoTileAdd{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:10px;
  font-weight: 900;
  letter-spacing: .06em;
  text-transform: uppercase;
  opacity: .92;
}

.logoTileAdd .plus{
  font-size: 22px;
}

/* ========= EDITOR (NO SCROLL) ========= */
.logo-editor-body.is-editor{
  overflow: hidden;
}

.editorShell{
  margin-top: 12px;
  height: calc(100vh - 74px - 24px); /* topbar ~74 + wrap padding */
  display: flex;
  flex-direction: column;
  gap: 10px;
}

/* cienki pasek: nazwa + zapisz */
.editorLine{
  display:flex;
  align-items:center;
  gap: 10px;
  padding: 10px 12px;
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.10);
}

.editorLineLeft{
  display:flex;
  align-items:center;
  gap: 10px;
  flex: 1;
  min-width: 0;
}

.etlLbl{
  font-weight: 900;
  letter-spacing: .06em;
  text-transform: uppercase;
  font-size: 12px;
  opacity: .88;
}

.etlName{
  flex: 1;
  min-width: 0;
}

.editorLineRight{
  display:flex;
  gap: 10px;
  align-items:center;
}

.editorLineMsg{
  margin-left: auto;
  opacity: .85;
  font-size: 12px;
  white-space: nowrap;
  overflow:hidden;
  text-overflow: ellipsis;
  max-width: 32%;
}

/* karta edytora */
.editorCard{
  flex: 1;
  min-height: 0;
  display:flex;
  flex-direction: column;
  overflow: hidden;
}

/* toolbar */
.editorToolbar{
  padding: 12px;
  border-bottom: 1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.06);
  display: grid;
  gap: 10px;
}

.toolRow{
  display:flex;
  align-items:center;
  gap: 10px;
  flex-wrap: wrap;
}

.toolGrow{ flex:1; min-width: 260px; }

.toolGroup{
  display:flex;
  align-items:center;
  gap: 8px;
}

.toolGroupWide{
  flex-wrap: wrap;
}

.toolSep{
  width:1px;
  height: 28px;
  background: rgba(255,255,255,.14);
  margin: 0 2px;
}

/* checkbox label */
.chk{
  display:flex;
  align-items:center;
  gap:8px;
  font-size: 12px;
  opacity:.9;
}

/* TEXT allowed chars inline */
.charsInline{
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.10);
  padding: 10px;
}

.charsInlineTop{
  display:flex;
  align-items:center;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 8px;
}

.charsListInline{
  display:flex;
  flex-wrap: wrap;
  gap: 6px;
  max-height: 62px;
  overflow: auto;
}

.charsListInline .ch{
  padding: 4px 8px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.12);
  font-weight: 900;
  letter-spacing: .06em;
}

/* CONTENT */
.editorContent{
  flex:1;
  min-height: 0;
  padding: 12px;
  overflow: hidden;
}

/* pane base */
.pane{
  height: 100%;
  min-height: 0;
}

/* TEXT preview full */
.prevFull{
  height: 100%;
  min-height: 0;
  display:flex;
  align-items:center;
  justify-content:center;
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.10);
  overflow:hidden;
  padding: 10px;
}

.prevFull canvas{
  width: 100%;
  height: auto;
  max-height: 100%;
  image-rendering: pixelated;
}

/* TEXT_PIX editor box */
.rtStage{
  height: 100%;
  min-height: 0;
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.10);
  padding: 12px;
  overflow:auto;
}

.rtEditor{
  min-height: 240px;
  outline: none;
  white-space: pre-wrap;
}

.rtEditor:empty:before{
  content: attr(data-placeholder);
  opacity: .55;
}

/* warning */
.pixWarn{
  margin-bottom: 10px;
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid rgba(255,180,80,.25);
  background: rgba(255,180,80,.08);
}

/* DRAW stage full */
.drawStageWrap{
  height: 100%;
  min-height: 0;
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.10);
  overflow:hidden;
  display:flex;
  align-items:center;
  justify-content:center;
  padding: 10px;
}

.drawStageRatio{
  width: 100%;
  max-height: 100%;
  aspect-ratio: 30 / 10;
  display:flex;
  align-items:center;
  justify-content:center;
}

#drawStage{
  width: 100%;
  height: 100%;
}

/* IMAGE layout */
.imgTopGrid{
  height: 100%;
  min-height: 0;
  display:grid;
  gap: 12px;
  grid-template-columns: 1fr 1fr;
}

@media (max-width: 1120px){
  .imgTopGrid{
    grid-template-columns: 1fr;
    grid-template-rows: auto auto;
    overflow: auto; /* wewnątrz karty, nie strona */
    padding-right: 2px;
  }
}

.imgCard{
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.10);
  padding: 10px;
  display:flex;
  flex-direction: column;
  min-height: 0;
}

.imgCardTitle{
  font-weight: 900;
  letter-spacing: .06em;
  text-transform: uppercase;
  font-size: 12px;
  opacity: .86;
  margin-bottom: 8px;
}

.imgStage{
  position: relative;
  flex: 1;
  min-height: 0;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.12);
  overflow:hidden;
  display:flex;
  align-items:center;
  justify-content:center;
}

#imgPreview{
  max-width: 100%;
  max-height: 100%;
}

.imgPrevWrap{
  flex:1;
  min-height: 0;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.12);
  overflow:hidden;
  display:flex;
  align-items:center;
  justify-content:center;
  padding: 8px;
}

#imgBigPreview{
  width: 100%;
  height: auto;
  max-height: 100%;
  image-rendering: pixelated;
}

.imgPrevHint{
  margin-top: 8px;
  opacity: .75;
  font-size: 12px;
}

/* IMAGE panels (accordion) */
.imgPanels{
  display:flex;
  gap: 10px;
  flex-wrap: wrap;
  padding-top: 6px;
}

.imgPanel{
  display:none;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.10);
  padding: 10px 12px;
  min-width: 220px;
}

.imgPanel.is-open{
  display:block;
}

.imgPanelTitle{
  display:flex;
  align-items:center;
  justify-content: space-between;
  gap: 10px;
  font-weight: 900;
  letter-spacing:.06em;
  text-transform: uppercase;
  font-size: 12px;
  opacity:.9;
  margin-bottom: 10px;
}

.imgPanelVal{
  font-weight: 900;
  letter-spacing:0;
  text-transform:none;
  opacity:.9;
}

.rng.v{
  width: 28px;
  height: 170px;
  writing-mode: vertical-lr;
  direction: rtl;
}

/* file button */
.fileBtn{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding: 8px 10px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(0,0,0,.10);
  cursor:pointer;
  user-select:none;
}

.fileBtn:hover{
  border-color: rgba(255,255,255,.22);
  background: rgba(0,0,0,.16);
}

/* =========================================
   FIX: Modale (wybór typu + podgląd)
   ========================================= */

/* 1) Overlay zawsze na wierzchu i klikalny */
.overlay{
  z-index: 9999;          /* builder ma 50 → to bywa za mało */
  pointer-events: auto;
}

/* 2) Modal wyboru typu: styl kafelków + klik */
#modesPick, #modePick { /* defensywnie – u Ciebie jest #modePick */
  width: 100%;
}

.mGrid{
  display: grid;
  gap: 12px;
  grid-template-columns: repeat(2, minmax(0, 1fr));
}

@media (max-width: 820px){
  .mGrid{ grid-template-columns: 1fr; }
}

.mTile{
  appearance: none;
  -webkit-appearance: none;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(0,0,0,.12);
  border-radius: 18px;
  padding: 14px;
  color: #fff;
  text-align: left;
  cursor: pointer;
  display: grid;
  gap: 6px;
  box-shadow: 0 10px 30px rgba(0,0,0,.30);
  pointer-events: auto;   /* ważne */
}

.mTile:hover{
  border-color: rgba(255,255,255,.26);
  background: rgba(0,0,0,.18);
  transform: translateY(-1px);
}

.mTile:active{
  transform: translateY(0);
}

.mTileTitle{
  font-weight: 900;
  letter-spacing: .08em;
  text-transform: uppercase;
  font-size: 14px;
}

.mTileSub{
  opacity: .78;
  font-size: 12px;
  line-height: 1.25;
}

/* 3) Modal podglądu: bez poziomego scrolla, canvas dopasowany */
.modal.bigModal{
  width: min(1100px, 96vw);
  max-height: 92vh;
  overflow: hidden; /* <-- klucz: blokuje poziomy scroll z builder.css */
}

.bigModalCanvas{
  width: 100%;
  height: min(70vh, 720px);
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden; /* brak h-scroll */
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.10);
  padding: 10px;
}

.bigModalCanvas canvas{
  width: 100%;
  height: auto;
  max-height: 100%;
  image-rendering: pixelated;
}
