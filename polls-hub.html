<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Familiada — centrum sondaży</title>

  <link rel="icon" href="favicon.ico"/>
  <link rel="stylesheet" href="css/base.css"/>
  <!-- bierzemy builder.css jako “system UI”: karty/modale/inputy -->
  <link rel="stylesheet" href="css/builder.css"/>
  <link rel="stylesheet" href="css/polls-hub.css"/>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2" defer></script>
  <script type="module" src="js/pages/polls-hub.js" defer></script>
</head>

<body class="polls-hub-body builder-body">

  <!-- TOPBAR jak w builder -->
  <header class="topbar">
    <div class="brand">FAMILIADA</div>
    <div class="right">
      <button class="btn" id="btnBack" type="button">
        <span class="only-desktop">← Moje gry</span>
        <span class="only-mobile">←</span>
      </button>

      <span class="who" id="who">—</span>
      <button class="btn sm" id="btnLogout" type="button">Wyloguj</button>
    </div>
  </header>

  <main class="hubWrap">

    <!-- ===== KARTA: SONDAŻE ===== -->
    <section class="card hubCard">
      <div class="hubCardHead">
        <div class="hubTitle">Sondaże</div>
        <div class="hubHint" id="hubMsg">—</div>
      </div>

      <div class="hubSplit" id="pollsSplit">

        <!-- LEWO: moje sondaże -->
        <div class="hubCol">
          <div class="hubColHead">
            <div class="hubColTitle">Moje sondaże</div>
            <div class="hubColActions">
              <button class="btn sm" id="btnShare" type="button">Udostępnij</button>
              <button class="btn sm" id="btnDetails" type="button">Szczegóły</button>
            </div>
          </div>

          <div class="hubFilters">
            <select class="inp sm" id="selPollSort">
              <option value="default">• Domyślne</option>
              <option value="new">• Najnowsze</option>
              <option value="old">• Najstarsze</option>
              <option value="az">• Nazwa A–Z</option>
              <option value="za">• Nazwa Z–A</option>
            </select>

            <label class="hubToggle">
              <input type="checkbox" id="chkPollArchive">
              <span>Archiwalne</span>
            </label>
          </div>

          <div class="hubList" id="listMyPolls"></div>
        </div>

        <!-- PRAWO: zadania -->
        <div class="hubCol">
          <div class="hubColHead">
            <div class="hubColTitle">Zadania</div>
            <div class="hubColActions"></div>
          </div>

          <div class="hubFilters">
            <select class="inp sm" id="selTaskSort">
              <option value="default">• Domyślne</option>
              <option value="new">• Najnowsze</option>
              <option value="old">• Najstarsze</option>
            </select>

            <label class="hubToggle">
              <input type="checkbox" id="chkTaskArchive">
              <span>Archiwalne</span>
            </label>
          </div>

          <div class="hubList" id="listTasks"></div>
        </div>
      </div>
    </section>

    <!-- ===== KARTA: SUBSKRYPCJE ===== -->
    <section class="card hubCard">
      <div class="hubCardHead">
        <div class="hubTitle">Subskrypcje</div>
        <div class="hubHint">—</div>
      </div>

      <div class="hubSplit" id="subsSplit">

        <!-- LEWO: moi subskrybenci -->
        <div class="hubCol">
          <div class="hubColHead">
            <div class="hubColTitle">Moi subskrybenci</div>
            <div class="hubColActions">
              <button class="btn sm" id="btnAddSubscriber" type="button">Dodaj</button>
            </div>
          </div>

          <div class="hubFilters">
            <select class="inp sm" id="selMySubsSort">
              <option value="default">• Domyślne</option>
              <option value="new">• Najnowsze</option>
              <option value="old">• Najstarsze</option>
              <option value="az">• Nazwa A–Z</option>
              <option value="za">• Nazwa Z–A</option>
            </select>
          </div>

          <div class="hubList" id="listMySubscribers"></div>
        </div>

        <!-- PRAWO: moje subskrypcje -->
        <div class="hubCol">
          <div class="hubColHead">
            <div class="hubColTitle">Moje subskrypcje</div>
            <div class="hubColActions"></div>
          </div>

          <div class="hubFilters">
            <select class="inp sm" id="selTheirSubsSort">
              <option value="default">• Domyślne</option>
              <option value="new">• Najnowsze</option>
              <option value="old">• Najstarsze</option>
              <option value="az">• Nazwa A–Z</option>
              <option value="za">• Nazwa Z–A</option>
            </select>
          </div>

          <div class="hubList" id="listMySubscriptions"></div>
        </div>
      </div>
    </section>

  </main>

  <!-- ===== MODAL: dodaj subskrybenta ===== -->
  <div class="overlay" id="ovAddSubscriber" style="display:none;">
    <div class="modal" style="width:min(640px,94vw)">
      <div class="mTitle">Dodaj subskrybenta</div>
      <div class="mSub">Wpisz e-mail albo nazwę użytkownika. Wyślemy zaproszenie.</div>

      <div class="row" style="display:flex; gap:10px; align-items:center; margin-top:10px;">
        <input class="inp" id="inpSubscriber" placeholder="email lub username" autocomplete="off" style="flex:1">
        <button class="btn" id="btnSendInvite" type="button">Wyślij</button>
      </div>

      <div class="mSub" id="addSubMsg" style="margin-top:10px; opacity:.85;">—</div>

      <div class="row" style="display:flex; justify-content:flex-end; gap:10px; margin-top:14px;">
        <button class="btn sm" id="btnCloseAddSub" type="button">Zamknij</button>
      </div>
    </div>
  </div>

</body>
</html>
